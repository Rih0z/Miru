# ãƒ“ãƒ¼ãƒ«ç‰¹åŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

ãƒ“ãƒ¼ãƒ«ã«é–¢ã™ã‚‹æƒ…å ±åŽé›†ã€é¸æŠžã€ä½“é¨“è¨˜éŒ²ã‚’æ”¯æ´ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæä¾›ã‚·ã‚¹ãƒ†ãƒ ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ“ãƒ¼ãƒ«ã®å¥½ã¿ã‚„çŠ¶æ³ã‚’æŠŠæ¡ã—ã€ChatGPTã‚„Claudeã§ä½¿ãˆã‚‹æœ€é©ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æä¾›ã€‚

## 2. ã‚³ã‚¢æ©Ÿèƒ½

### 2.1 ãƒ“ãƒ¼ãƒ«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†

```typescript
interface BeerContext {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ“ãƒ¼ãƒ«æƒ…å ±
    userId: string;
    
    // å¥½ã¿ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
    preferences: {
        favoriteStyles: string[];      // IPA, ãƒ”ãƒ«ã‚¹ãƒŠãƒ¼, ã‚¹ã‚¿ã‚¦ãƒˆç­‰
        flavorProfile: {
            bitterness: number;        // 1-10 (è‹¦å‘³è€æ€§)
            sweetness: number;         // 1-10 (ç”˜å‘³å¥½ã¿)
            sourness: number;          // 1-10 (é…¸å‘³å¥½ã¿)
            richness: number;          // 1-10 (æ¿ƒåŽšã•å¥½ã¿)
        };
        alcoholTolerance: 'low' | 'medium' | 'high';
        avoidIngredients: string[];    // ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ç­‰
    };
    
    // é£²é…’å±¥æ­´
    history: {
        triedBeers: Beer[];
        ratings: BeerRating[];
        favoriteBreweries: string[];
        visitedBars: Bar[];
    };
    
    // ç¾åœ¨ã®çŠ¶æ³
    currentState: {
        mood: string;                  // æ°—åˆ†
        occasion: string;              // é£²ã‚€æ©Ÿä¼šï¼ˆè‡ªå®…ã€ãƒãƒ¼ã€ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ç­‰ï¼‰
        budget: number;                // äºˆç®—
        availability: string;          // åœ°åŸŸãƒ»å…¥æ‰‹å¯èƒ½æ€§
    };
    
    // ç›®æ¨™
    goals: {
        explorationGoals: string[];    // è©¦ã—ãŸã„ã‚¹ã‚¿ã‚¤ãƒ«
        knowledgeGoals: string[];      // å­¦ã³ãŸã„ã“ã¨
        experienceGoals: string[];     // ä½“é¨“ã—ãŸã„ã“ã¨
    };
}
```

### 2.2 ãƒ“ãƒ¼ãƒ«å°‚ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ

```typescript
class BeerPromptGenerator {
    
    // ãƒ“ãƒ¼ãƒ«é¸æŠžãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateBeerSelectionPrompt(context: BeerContext): string {
        return `
ç§ã®ãƒ“ãƒ¼ãƒ«ã®å¥½ã¿ï¼š
- å¥½ããªã‚¹ã‚¿ã‚¤ãƒ«: ${context.preferences.favoriteStyles.join(', ')}
- è‹¦å‘³è€æ€§: ${context.preferences.flavorProfile.bitterness}/10
- å¥½ã¿ã®æ¿ƒã•: ${context.preferences.flavorProfile.richness}/10
${context.preferences.avoidIngredients.length > 0 ? `- é¿ã‘ãŸã„åŽŸææ–™: ${context.preferences.avoidIngredients.join(', ')}` : ''}

ç¾åœ¨ã®çŠ¶æ³ï¼š
- æ°—åˆ†: ${context.currentState.mood}
- æ©Ÿä¼š: ${context.currentState.occasion}
- äºˆç®—: ${context.currentState.budget}å††
- å ´æ‰€: ${context.currentState.availability}

æœ€è¿‘é£²ã‚“ã§è‰¯ã‹ã£ãŸãƒ“ãƒ¼ãƒ«ï¼š
${this.formatRecentFavorites(context.history)}

ä¸Šè¨˜ã®æƒ…å ±ã‚’è¸ã¾ãˆã¦ã€ä»Šã®ç§ã«æœ€é©ãªãƒ“ãƒ¼ãƒ«ã‚’3-5æœ¬æŽ¨è–¦ã—ã¦ãã ã•ã„ã€‚
ãã‚Œãžã‚Œã«ã¤ã„ã¦ã€ãªãœãŠã™ã™ã‚ãªã®ã‹ã€å‘³ã®ç‰¹å¾´ã€å…¥æ‰‹æ–¹æ³•ã‚‚æ•™ãˆã¦ãã ã•ã„ã€‚
`;
    }
    
    // ãƒ“ã‚¢ãƒãƒ¼è¨ªå•ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateBeerBarPrompt(context: BeerContext, location: string): string {
        return `
${location}å‘¨è¾ºã®ãƒ“ã‚¢ãƒãƒ¼ã‚’è¨ªå•ã—ãŸã„ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚

ç§ã®ãƒ“ãƒ¼ãƒ«å—œå¥½ï¼š
${this.formatPreferences(context.preferences)}

å¸Œæœ›æ¡ä»¶ï¼š
- äºˆç®—: ${context.currentState.budget}å††/äºº
- é›°å›²æ°—: ${context.currentState.mood}ãªæ„Ÿã˜
- è©¦ã—ãŸã„ã‚¹ã‚¿ã‚¤ãƒ«: ${context.goals.explorationGoals.join(', ')}

ä»¥ä¸‹ã®ç‚¹ã‚’å«ã‚ã¦ã€ãŠã™ã™ã‚ã®ãƒ“ã‚¢ãƒãƒ¼ã‚’æ•™ãˆã¦ãã ã•ã„ï¼š
1. åº—åã¨å ´æ‰€
2. ãƒ“ãƒ¼ãƒ«ã®ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—ç‰¹å¾´
3. ç§ã®å¥½ã¿ã«åˆã„ãã†ãªå…·ä½“çš„ãªãƒ“ãƒ¼ãƒ«
4. æ–™ç†ã®ãŠã™ã™ã‚
5. è¨ªå•ã®ãƒ™ã‚¹ãƒˆã‚¿ã‚¤ãƒŸãƒ³ã‚°
`;
    }
    
    // ãƒ“ãƒ¼ãƒ«çŸ¥è­˜å­¦ç¿’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateBeerLearningPrompt(context: BeerContext, topic: string): string {
        const prompts = {
            brewing: `
ãƒ“ãƒ¼ãƒ«é†¸é€ ã«ã¤ã„ã¦å­¦ã³ãŸã„ã§ã™ã€‚
ç§ã®ç¾åœ¨ã®çŸ¥è­˜ãƒ¬ãƒ™ãƒ«: ${this.assessKnowledgeLevel(context)}
ç‰¹ã«èˆˆå‘³ãŒã‚ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«: ${context.preferences.favoriteStyles.join(', ')}

ä»¥ä¸‹ã«ã¤ã„ã¦ã€åˆå¿ƒè€…ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜Žã—ã¦ãã ã•ã„ï¼š
1. åŸºæœ¬çš„ãªé†¸é€ ãƒ—ãƒ­ã‚»ã‚¹
2. ${context.preferences.favoriteStyles[0]}ã®ç‰¹å¾´çš„ãªè£½æ³•
3. è‡ªå®…ã§ã‚‚ç†è§£ã§ãã‚‹å‘³ã®é•ã„ã®è¦å› 
4. æ¬¡ã«è©¦ã™ã¹ããƒ“ãƒ¼ãƒ«ã®é¸ã³æ–¹
`,
            tasting: `
ãƒ“ãƒ¼ãƒ«ã®ãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã‚’å­¦ã³ãŸã„ã§ã™ã€‚

ã‚ˆãé£²ã‚€ãƒ“ãƒ¼ãƒ«: ${this.formatFrequentBeers(context.history)}
è‹¦æ‰‹ãªè¡¨ç¾: å°‚é–€ç”¨èªžãŒå¤šã™ãŽã‚‹ã‚‚ã®

ä»¥ä¸‹ã‚’å«ã‚ã¦ã€å®Ÿè·µçš„ãªãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„ï¼š
1. äº”æ„Ÿã‚’ä½¿ã£ãŸè©•ä¾¡æ–¹æ³•
2. ç§ãŒã‚ˆãé£²ã‚€ãƒ“ãƒ¼ãƒ«ã§ç·´ç¿’ã™ã‚‹æ–¹æ³•
3. å‘³ã®é•ã„ã‚’è¨€èªžåŒ–ã™ã‚‹ã‚³ãƒ„
4. ãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒŽãƒ¼ãƒˆã®ä»˜ã‘æ–¹
`
        };
        
        return prompts[topic] || this.generateGenericLearningPrompt(context, topic);
    }
    
    // ãƒ“ãƒ¼ãƒ«ä½“é¨“è¨˜éŒ²ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateBeerLoggingPrompt(beerName: string): string {
        return `
ä»Šé£²ã‚“ã ãƒ“ãƒ¼ãƒ«ã€Œ${beerName}ã€ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®è¦³ç‚¹ã‹ã‚‰è¨˜éŒ²ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š

å¤–è¦³ï¼š
- è‰²: [å…¥åŠ›ã—ã¦ãã ã•ã„]
- æ³¡: [å…¥åŠ›ã—ã¦ãã ã•ã„]
- é€æ˜Žåº¦: [å…¥åŠ›ã—ã¦ãã ã•ã„]

é¦™ã‚Šï¼š
- ç¬¬ä¸€å°è±¡: [å…¥åŠ›ã—ã¦ãã ã•ã„]
- å…·ä½“çš„ãªé¦™ã‚Š: [å…¥åŠ›ã—ã¦ãã ã•ã„]

å‘³ã‚ã„ï¼š
- æœ€åˆã®å°è±¡: [å…¥åŠ›ã—ã¦ãã ã•ã„]
- ä¸­ç›¤ã®å‘³: [å…¥åŠ›ã—ã¦ãã ã•ã„]
- å¾Œå‘³: [å…¥åŠ›ã—ã¦ãã ã•ã„]
- è‹¦å‘³: [1-10ã§è©•ä¾¡]
- ç”˜å‘³: [1-10ã§è©•ä¾¡]

ç·åˆè©•ä¾¡ï¼š
- ç‚¹æ•°: [1-10]
- ã¾ãŸé£²ã¿ãŸã„ã‹: [ã¯ã„/ã„ã„ãˆ]
- ãŠã™ã™ã‚ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³: [å…¥åŠ›ã—ã¦ãã ã•ã„]

ã“ã®æƒ…å ±ã‚’æ§‹é€ åŒ–ã•ã‚ŒãŸJSONå½¢å¼ã§ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚
`;
    }
}
```

### 2.3 ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```typescript
class BeerDataImportPrompts {
    
    // Untappdãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è§£æžãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateUntappdAnalysisPrompt(): string {
        return `
ç§ã®Untappdãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³å±¥æ­´ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‹ã‚‰ã€ãƒ“ãƒ¼ãƒ«ã®å¥½ã¿ã¨å‚¾å‘ã‚’è©³ç´°ã«åˆ†æžã—ã¦ãã ã•ã„ã€‚

æŠ½å‡ºãƒ»åˆ†æžã—ã¦ã»ã—ã„æƒ…å ±ï¼š

1. **é£²é…’å±¥æ­´ã®çµ±è¨ˆ**
   - ç·ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ•°ã¨ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ“ãƒ¼ãƒ«æ•°
   - æœ€ã‚‚ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãƒ“ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆä¸Šä½5ã¤ï¼‰
   - å¹³å‡è©•ä¾¡ã‚¹ã‚³ã‚¢ã¨è©•ä¾¡ã®åˆ†å¸ƒ
   - ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³é »åº¦ï¼ˆé€±/æœˆã‚ãŸã‚Šï¼‰

2. **ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã®å¥½ã¿**
   - æœ€ã‚‚é »ç¹ã«ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ï¼ˆä¸Šä½10ï¼‰
   - é«˜è©•ä¾¡ã‚’ä»˜ã‘ã¦ã„ã‚‹ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã®ç‰¹å¾´
   - å›½åˆ¥ãƒ»åœ°åŸŸåˆ¥ã®å‚¾å‘

3. **ãƒ“ã‚¢ã‚¹ã‚¿ã‚¤ãƒ«ã®è©³ç´°åˆ†æž**
   - å„ã‚¹ã‚¿ã‚¤ãƒ«ã”ã¨ã®å¹³å‡è©•ä¾¡
   - å­£ç¯€ã”ã¨ã®é£²é…’å‚¾å‘
   - è‹¦å‘³ï¼ˆIBUï¼‰ã€ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«åº¦æ•°ï¼ˆABVï¼‰ã®å¥½ã¿ç¯„å›²
   - é¿ã‘ã¦ã„ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆä½Žè©•ä¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

4. **ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã®åˆ†æž**
   - ã‚ˆãä½¿ã†ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼è¡¨ç¾
   - ãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒã‚¬ãƒ†ã‚£ãƒ–ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
   - é‡è¦–ã—ã¦ã„ã‚‹è¦ç´ ï¼ˆé¦™ã‚Šã€å‘³ã€ã®ã©è¶Šã—ãªã©ï¼‰

5. **æŽ¢ç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³**
   - æ–°ã—ã„ãƒ“ãƒ¼ãƒ«ã‚’è©¦ã™é »åº¦
   - åŒã˜ãƒ“ãƒ¼ãƒ«ã‚’ç¹°ã‚Šè¿”ã—é£²ã‚€å‚¾å‘
   - é™å®šãƒ“ãƒ¼ãƒ«ã‚„ã‚³ãƒ©ãƒœãƒ“ãƒ¼ãƒ«ã¸ã®é–¢å¿ƒåº¦

ä»¥ä¸‹ã®JSONå½¢å¼ã§æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ï¼š
{
  "statistics": {
    "total_checkins": æ•°å€¤,
    "unique_beers": æ•°å€¤,
    "avg_rating": æ•°å€¤,
    "checkin_frequency": "é€±Xå›ž"
  },
  "style_preferences": {
    "top_styles": [
      {"style": "IPA", "count": æ•°å€¤, "avg_rating": æ•°å€¤},
      ...
    ],
    "ibu_preference": "X-Y",
    "abv_preference": "X%-Y%"
  },
  "brewery_preferences": {
    "top_breweries": [
      {"name": "ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼å", "checkins": æ•°å€¤, "avg_rating": æ•°å€¤},
      ...
    ],
    "geographic_preference": ["å›½/åœ°åŸŸ"],
    "brewery_size_preference": "ãƒžã‚¤ã‚¯ãƒ­/ä¸­è¦æ¨¡/å¤§æ‰‹"
  },
  "flavor_profile": {
    "preferred_flavors": ["ãƒ›ãƒƒãƒ—", "ã‚·ãƒˆãƒ©ã‚¹", ...],
    "avoided_flavors": ["ã‚¹ãƒ¢ãƒ¼ã‚¯", ...],
    "texture_preference": "ãƒ©ã‚¤ãƒˆ/ãƒŸãƒ‡ã‚£ã‚¢ãƒ /ãƒ•ãƒ«"
  },
  "exploration_behavior": {
    "new_beer_ratio": "X%",
    "repeat_favorites": ["ãƒ“ãƒ¼ãƒ«å", ...],
    "limited_edition_interest": "é«˜/ä¸­/ä½Ž"
  },
  "insights": [
    "ãƒ›ãƒƒãƒ—ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ãªãƒ“ãƒ¼ãƒ«ã‚’å¥½ã‚€å‚¾å‘",
    "åœ°å…ƒã®ãƒžã‚¤ã‚¯ãƒ­ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã‚’ç©æ¥µçš„ã«é–‹æ‹“",
    ...
  ]
}
`;
    }
    
    // InstagramæŠ•ç¨¿è§£æžãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateInstagramBeerAnalysisPrompt(): string {
        return `
ç§ã®Instagramã®ãƒ“ãƒ¼ãƒ«é–¢é€£æŠ•ç¨¿ï¼ˆå†™çœŸã¨ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã‹ã‚‰ã€ãƒ“ãƒ¼ãƒ«ã®å¥½ã¿ã¨ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã‚’åˆ†æžã—ã¦ãã ã•ã„ã€‚

åˆ†æžé …ç›®ï¼š

1. **æŠ•ç¨¿ãƒ‘ã‚¿ãƒ¼ãƒ³**
   - ãƒ“ãƒ¼ãƒ«æŠ•ç¨¿ã®é »åº¦
   - æŠ•ç¨¿ã™ã‚‹æ›œæ—¥ãƒ»æ™‚é–“å¸¯ã®å‚¾å‘
   - å ´æ‰€ï¼ˆè‡ªå®…/ãƒãƒ¼/ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼/å±‹å¤–ï¼‰

2. **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«åˆ†æž**ï¼ˆå†™çœŸã‹ã‚‰èª­ã¿å–ã‚Œã‚‹æƒ…å ±ï¼‰
   - ãƒ“ãƒ¼ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆè‰²ã€æ³¡ã€ã‚°ãƒ©ã‚¹ã®å½¢çŠ¶ï¼‰
   - é£²ã‚“ã§ã„ã‚‹ç’°å¢ƒãƒ»ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
   - ä¸€ç·’ã«å†™ã£ã¦ã„ã‚‹æ–™ç†ã‚„ãŠã¤ã¾ã¿

3. **ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³åˆ†æž**
   - ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°
   - ãƒ“ãƒ¼ãƒ«ã®èª¬æ˜Žã§ä½¿ã†è¡¨ç¾
   - æ„Ÿæƒ…è¡¨ç¾ï¼ˆæ¥½ã—ã„ã€ãƒªãƒ©ãƒƒã‚¯ã‚¹ã€ç™ºè¦‹ãªã©ï¼‰
   - ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ã¦ã„ã‚‹ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã‚„åº—èˆ—

4. **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«è¦ç´ **
   - èª°ã¨é£²ã‚“ã§ã„ã‚‹ã‹ï¼ˆä¸€äºº/å‹äºº/ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰
   - ãƒ“ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã¸ã®å‚åŠ 
   - ãƒ“ã‚¢ãƒãƒ¼ã‚„ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼è¨ªå•ã®é »åº¦

5. **ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«åˆ†æž**
   - ãƒ“ãƒ¼ãƒ«ã‚’æ¥½ã—ã‚€ã‚¿ã‚¤ãƒŸãƒ³ã‚°
   - ãƒšã‚¢ãƒªãƒ³ã‚°ã®å¥½ã¿
   - ç‰¹åˆ¥ãªæ—¥ã®ãƒ“ãƒ¼ãƒ«é¸æŠž

JSONå½¢å¼ã§ã®å‡ºåŠ›ï¼š
{
  "posting_patterns": {
    "frequency": "é€±Xå›ž",
    "typical_timing": ["é‡‘æ›œå¤œ", "é€±æœ«åˆå¾Œ"],
    "locations": {
      "home": X%,
      "bars": X%,
      "breweries": X%,
      "outdoor": X%
    }
  },
  "visual_analysis": {
    "common_styles": ["ãƒšãƒ¼ãƒ«ã‚¨ãƒ¼ãƒ«", "IPA", ...],
    "glassware": ["ãƒ‘ã‚¤ãƒ³ãƒˆ", "ãƒãƒ¥ãƒ¼ãƒªãƒƒãƒ—", ...],
    "settings": ["ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«", "ãŠã—ã‚ƒã‚Œ", ...]
  },
  "caption_insights": {
    "common_hashtags": ["#craftbeer", "#åœ°ãƒ“ãƒ¼ãƒ«", ...],
    "flavor_vocabulary": ["ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãƒ¼", "ãƒ›ãƒƒãƒ”ãƒ¼", ...],
    "emotion_expressions": ["æœ€é«˜", "ç™’ã—", ...]
  },
  "social_context": {
    "drinking_companions": "ä¸»ã«å‹äººã¨",
    "event_participation": "æœˆ1-2å›ž",
    "brewery_visits": "ç©æ¥µçš„"
  },
  "lifestyle_insights": [
    "é€±æœ«ã®ãƒªãƒ©ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ ã«ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«",
    "æ–™ç†ã¨ã®ãƒšã‚¢ãƒªãƒ³ã‚°ã‚’é‡è¦–",
    "æ–°ã—ã„ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼é–‹æ‹“ãŒè¶£å‘³"
  ]
}
`;
    }
    
    // ãƒ“ãƒ¼ãƒ«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ãƒˆçµ±åˆè§£æžãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateMultiPlatformAnalysisPrompt(): string {
        return `
è¤‡æ•°ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆUntappdã€RateBeerã€BeerAdvocateã€å€‹äººãƒ–ãƒ­ã‚°ç­‰ï¼‰ã§ã®ç§ã®ãƒ“ãƒ¼ãƒ«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’çµ±åˆçš„ã«åˆ†æžã—ã¦ãã ã•ã„ã€‚

åˆ†æžã®è¦³ç‚¹ï¼š

1. **ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã®é•ã„**
   - å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã®è©•ä¾¡å‚¾å‘ã®å·®
   - è©³ç´°åº¦ã®é•ã„ï¼ˆçŸ­è©•vsé•·æ–‡ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰
   - å°‚é–€ç”¨èªžã®ä½¿ç”¨é »åº¦

2. **ä¸€è²«ã—ã¦ã„ã‚‹å¥½ã¿**
   - ã™ã¹ã¦ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§é«˜è©•ä¾¡ã®ã‚¹ã‚¿ã‚¤ãƒ«/ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼
   - å…±é€šã—ã¦è¨€åŠã•ã‚Œã‚‹å¥½ã¿ã®è¦ç´ 
   - é¿ã‘ã¦ã„ã‚‹è¦ç´ 

3. **ãƒ“ãƒ¼ãƒ«æŽ¢ç´¢æ–¹æ³•**
   - æ–°ã—ã„ãƒ“ãƒ¼ãƒ«ã®ç™ºè¦‹çµŒè·¯
   - æŽ¨è–¦ã‚„è©•åˆ¤ã‚’å‚è€ƒã«ã™ã‚‹åº¦åˆã„
   - å†’é™ºçš„ãªé¸æŠžvså®‰å…¨ãªé¸æŠž

4. **çŸ¥è­˜ãƒ¬ãƒ™ãƒ«ã¨æˆé•·**
   - ãƒ“ãƒ¼ãƒ«ç”¨èªžã®ç†è§£åº¦
   - ãƒ†ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°èƒ½åŠ›ã®å‘ä¸Š
   - èˆˆå‘³ã®åºƒãŒã‚Šï¼ˆåˆæœŸâ†’ç¾åœ¨ï¼‰

5. **è³¼è²·è¡Œå‹•ã®ç¤ºå”†**
   - ä¾¡æ ¼æ„Ÿåº¦
   - å…¥æ‰‹å›°é›£ãªãƒ“ãƒ¼ãƒ«ã¸ã®åŸ·ç€åº¦
   - ã¾ã¨ã‚è²·ã„ã‚„ã‚»ãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®å‚¾å‘

çµ±åˆåˆ†æžçµæžœï¼š
{
  "cross_platform_consistency": {
    "rating_variance": "ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é–“ã®è©•ä¾¡ã®ä¸€è²«æ€§",
    "common_favorites": ["ä¸€è²«ã—ã¦é«˜è©•ä¾¡ã®ãƒ“ãƒ¼ãƒ«/ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼"],
    "universal_preferences": ["ã™ã¹ã¦ã§è¨€åŠã•ã‚Œã‚‹å¥½ã¿"]
  },
  "review_behavior": {
    "detail_level": {
      "untappd": "ç°¡æ½”",
      "ratebeer": "è©³ç´°",
      "blog": "ã‚¨ãƒƒã‚»ã‚¤é¢¨"
    },
    "vocabulary_sophistication": "åˆç´š/ä¸­ç´š/ä¸Šç´š"
  },
  "discovery_patterns": {
    "sources": ["åº—å“¡æŽ¨è–¦", "SNS", "è©•ä¾¡ã‚µã‚¤ãƒˆ"],
    "risk_taking": "ä¿å®ˆçš„/ãƒãƒ©ãƒ³ã‚¹åž‹/å†’é™ºçš„",
    "brand_loyalty": "é«˜/ä¸­/ä½Ž"
  },
  "evolution": {
    "initial_preferences": ["æœ€åˆã®é ƒã®å¥½ã¿"],
    "current_preferences": ["ç¾åœ¨ã®å¥½ã¿"],
    "knowledge_growth": "é¡•è‘—ãªæˆé•·ãŒè¦‹ã‚‰ã‚Œã‚‹"
  },
  "purchasing_insights": {
    "price_sensitivity": "ä¾¡æ ¼é‡è¦–/å“è³ªé‡è¦–/ãƒãƒ©ãƒ³ã‚¹åž‹",
    "rarity_seeking": "é™å®šå“ã¸ã®é–¢å¿ƒåº¦",
    "storage_behavior": "å³é£²ã¿/ã‚»ãƒ©ãƒ¼ãƒªãƒ³ã‚°"
  },
  "composite_profile": {
    "summary": "ãƒ›ãƒƒãƒ—ç³»ã‚’ä¸­å¿ƒã«å¹…åºƒãæŽ¢ç´¢ã™ã‚‹ä¸­ç´šè€…",
    "next_recommendations": ["æ¬¡ã«è©¦ã™ã¹ãã‚¹ã‚¿ã‚¤ãƒ«/ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼"],
    "growth_opportunities": ["ã•ã‚‰ã«æ·±ã‚ã‚‹ã¹ãé ˜åŸŸ"]
  }
}
`;
    }
    
    // ãƒ“ãƒ¼ãƒ«æŽ¢ç´¢è¡Œå‹•åˆ†æžãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateBeerSearchBehaviorPrompt(): string {
        return `
ç§ã®ãƒ“ãƒ¼ãƒ«é–¢é€£ã®æ¤œç´¢å±¥æ­´ã€ä¿å­˜ã—ãŸè¨˜äº‹ã€ãƒ–ãƒƒã‚¯ãƒžãƒ¼ã‚¯ã€ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãªã©ã‹ã‚‰ã€ã©ã®ã‚ˆã†ã«ãƒ“ãƒ¼ãƒ«ã‚’æŽ¢ã—ã¦ã„ã‚‹ã‹åˆ†æžã—ã¦ãã ã•ã„ã€‚

åˆ†æžé …ç›®ï¼š

1. **æƒ…å ±æºã®å‚¾å‘**
   - ã‚ˆãå‚ç…§ã™ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ/ã‚¢ãƒ—ãƒª
   - ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã„ã‚‹ãƒ“ãƒ¼ãƒ«é–¢é€£ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
   - ä¿¡é ¼ã—ã¦ã„ã‚‹æƒ…å ±æº

2. **æ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³**
   - ã‚ˆãæ¤œç´¢ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
   - æ¤œç´¢ã™ã‚‹çŠ¶æ³ï¼ˆæ–°ã—ã„åº—ã€æ—…è¡Œå…ˆã€ã‚¤ãƒ™ãƒ³ãƒˆå‰ãªã©ï¼‰
   - äº‹å‰ãƒªã‚µãƒ¼ãƒã®æ·±ã•

3. **æ„æ€æ±ºå®šãƒ—ãƒ­ã‚»ã‚¹**
   - é‡è¦–ã™ã‚‹æƒ…å ±ï¼ˆè©•ä¾¡ã€èª¬æ˜Žã€ç”»åƒãªã©ï¼‰
   - æ±ºã‚æ‰‹ã¨ãªã‚‹è¦å› 
   - å´ä¸‹ã™ã‚‹ç†ç”±

4. **ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã¸ã®é–¢å¿ƒ**
   - ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã„ã‚‹ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼
   - ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¸ã®é–¢å¿ƒåº¦
   - åœ°å…ƒvsæµ·å¤–ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã®æ¯”çŽ‡

å‡ºåŠ›å½¢å¼ï¼š
{
  "information_sources": {
    "primary": ["Untappd", "Instagram"],
    "trusted_accounts": ["@craftbeerjp", ...],
    "reference_sites": ["ãƒ“ãƒ¼ãƒ«å›³é‘‘", ...]
  },
  "search_patterns": {
    "common_queries": ["IPA æ–°ä½œ", "ã€‡ã€‡é§… ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«"],
    "search_triggers": ["é€±æœ«ã®äºˆå®š", "æ–°è¦é–‹æ‹“"],
    "research_depth": "å¾¹åº•çš„/é©åº¦/æœ€å°é™"
  },
  "decision_factors": {
    "important": ["ã‚¹ã‚¿ã‚¤ãƒ«", "ABV", "è©•ä¾¡"],
    "moderate": ["ä¾¡æ ¼", "å…¥æ‰‹æ€§"],
    "low": ["ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ‡ã‚¶ã‚¤ãƒ³"]
  },
  "brewery_interests": {
    "following": ["ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼åãƒªã‚¹ãƒˆ"],
    "preference_type": "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é‡è¦–/å“è³ªé‡è¦–/ãƒˆãƒ¬ãƒ³ãƒ‰é‡è¦–",
    "geographic_interest": "ãƒ­ãƒ¼ã‚«ãƒ«é‡è¦–/ã‚°ãƒ­ãƒ¼ãƒãƒ«æŽ¢ç´¢"
  }
}
`;
    }
    
    // ãƒ“ãƒ¼ãƒ«ç”»åƒå±¥æ­´ã®åŒ…æ‹¬çš„è§£æžãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    generateBeerPhotoHistoryAnalysisPrompt(): string {
        return `
ç§ãŒæ’®å½±ãƒ»ä¿å­˜ã—ãŸãƒ“ãƒ¼ãƒ«ã®ç”»åƒå±¥æ­´ï¼ˆã‚¹ãƒžãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®ã‚«ãƒ¡ãƒ©ãƒ­ãƒ¼ãƒ«ã€Googleãƒ•ã‚©ãƒˆã€iCloudå†™çœŸãªã©ï¼‰ã‹ã‚‰ã€ãƒ“ãƒ¼ãƒ«ã®å¥½ã¿ã¨é£²é…’ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åŒ…æ‹¬çš„ã«åˆ†æžã—ã¦ãã ã•ã„ã€‚

ç”»åƒã‹ã‚‰èª­ã¿å–ã£ã¦ã»ã—ã„æƒ…å ±ï¼š

1. **ãƒ“ãƒ¼ãƒ«è‡ªä½“ã®è¦–è¦šæƒ…å ±**
   - ãƒ“ãƒ¼ãƒ«ã®è‰²ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰/ã‚¢ãƒ³ãƒãƒ¼/ãƒ–ãƒ©ã‚¦ãƒ³/ãƒ–ãƒ©ãƒƒã‚¯ï¼‰
   - æ³¡ã®çŠ¶æ…‹ï¼ˆé«˜ã•ã€ãã‚ç´°ã‹ã•ã€æŒç¶šæ€§ï¼‰
   - ã‚°ãƒ©ã‚¹ã®ç¨®é¡žï¼ˆãƒ‘ã‚¤ãƒ³ãƒˆ/ãƒãƒ¥ãƒ¼ãƒªãƒƒãƒ—/ãƒ´ã‚¡ã‚¤ãƒ„ã‚§ãƒ³/ã‚¹ãƒ‹ãƒ•ã‚¿ãƒ¼ç­‰ï¼‰
   - é€æ˜Žåº¦ï¼ˆã‚¯ãƒªã‚¢/ãƒ˜ã‚¤ã‚¸ãƒ¼/æ¿ã‚Šï¼‰
   - é‡ï¼ˆãƒ•ãƒ«/åŠåˆ†/å°‘é‡ï¼‰

2. **ãƒ©ãƒ™ãƒ«ãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±**
   - ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼å
   - ãƒ“ãƒ¼ãƒ«å
   - ã‚¹ã‚¿ã‚¤ãƒ«è¡¨è¨˜
   - ABVï¼ˆã‚¢ãƒ«ã‚³ãƒ¼ãƒ«åº¦æ•°ï¼‰
   - ç¼¶/ç“¶ã®ãƒ‡ã‚¶ã‚¤ãƒ³å‚¾å‘

3. **é£²ã‚“ã§ã„ã‚‹ç’°å¢ƒ**
   - å ´æ‰€ï¼ˆè‡ªå®…/ãƒãƒ¼/ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³/å±‹å¤–/ã‚¤ãƒ™ãƒ³ãƒˆï¼‰
   - æ™‚é–“å¸¯ï¼ˆæ˜¼/å¤•æ–¹/å¤œï¼‰ã®æŽ¨å®š
   - å­£ç¯€æ„Ÿï¼ˆæœè£…ã€èƒŒæ™¯ã‹ã‚‰æŽ¨æ¸¬ï¼‰
   - åŒå¸­è€…ã®æœ‰ç„¡

4. **ä¸€ç·’ã«å†™ã£ã¦ã„ã‚‹ã‚‚ã®**
   - æ–™ç†ãƒ»ãŠã¤ã¾ã¿ã®ç¨®é¡ž
   - è¤‡æ•°ã®ãƒ“ãƒ¼ãƒ«ï¼ˆé£²ã¿æ¯”ã¹ï¼‰
   - ãƒ“ãƒ¼ãƒ«ãƒ•ãƒ©ã‚¤ãƒˆ
   - ã‚°ãƒ©ã‚¦ãƒ©ãƒ¼ã‚„ã‚¯ãƒ©ã‚¦ãƒ©ãƒ¼

5. **æ™‚ç³»åˆ—ã§ã®å¤‰åŒ–**
   - æœ€ã‚‚å¤ã„ç”»åƒã¨æœ€æ–°ã®ç”»åƒã®æ¯”è¼ƒ
   - ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰é·
   - ã‚°ãƒ©ã‚¹ã‚¦ã‚§ã‚¢ã¸ã®ã“ã ã‚ã‚Šã®å¤‰åŒ–
   - æ’®å½±é »åº¦ã®æŽ¨ç§»

6. **ç‰¹æ®Šãªãƒ‘ã‚¿ãƒ¼ãƒ³**
   - é™å®šãƒ“ãƒ¼ãƒ«ã®å‰²åˆ
   - åŒã˜ãƒ“ãƒ¼ãƒ«ã®ç¹°ã‚Šè¿”ã—ç™»å ´
   - ç‰¹å®šã®ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã¸ã®åã‚Š
   - æ—…è¡Œå…ˆã§ã®ãƒ“ãƒ¼ãƒ«

åˆ†æžçµæžœã®JSONå½¢å¼ï¼š
{
  "photo_statistics": {
    "total_photos": æ•°å€¤,
    "date_range": "YYYY-MM-DD to YYYY-MM-DD",
    "frequency": "é€±Xæžš",
    "peak_periods": ["æ™‚æœŸ"]
  },
  "beer_characteristics": {
    "color_distribution": {
      "golden": X%,
      "amber": X%,
      "brown": X%,
      "black": X%
    },
    "clarity_preference": "ã‚¯ãƒªã‚¢å¯„ã‚Š/ãƒ˜ã‚¤ã‚¸ãƒ¼å¯„ã‚Š",
    "common_styles": ["IPA", "Stout", ...],
    "abv_range": "X%-Y%ãŒä¸­å¿ƒ"
  },
  "consumption_patterns": {
    "primary_locations": {
      "home": X%,
      "bars": X%,
      "restaurants": X%,
      "breweries": X%,
      "outdoor": X%
    },
    "social_context": "ã‚½ãƒ­å¤šã‚/ã‚°ãƒ«ãƒ¼ãƒ—å¤šã‚",
    "food_pairing": ["ã‚ˆãä¸€ç·’ã«å†™ã‚‹æ–™ç†"],
    "seasonal_trends": {
      "spring": ["è»½ã‚ã®ã‚¹ã‚¿ã‚¤ãƒ«"],
      "summer": ["ãƒ›ãƒƒãƒ”ãƒ¼ãªãƒ“ãƒ¼ãƒ«"],
      "fall": ["ã‚¢ãƒ³ãƒãƒ¼ç³»"],
      "winter": ["é«˜ABVã€ãƒ€ãƒ¼ã‚¯ç³»"]
    }
  },
  "brewery_insights": {
    "most_photographed": ["ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼åï¼ˆå›žæ•°ï¼‰"],
    "geographic_diversity": "ãƒ­ãƒ¼ã‚«ãƒ«ä¸­å¿ƒ/å›½å†…åºƒç¯„/å›½éš›çš„",
    "brewery_loyalty": ["ãƒªãƒ”ãƒ¼ãƒˆçŽ‡ã®é«˜ã„ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼"]
  },
  "evolution_timeline": {
    "early_phase": "ãƒ©ã‚¬ãƒ¼ä¸­å¿ƒã®å¤§æ‰‹ãƒ“ãƒ¼ãƒ«",
    "exploration_phase": "ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ã¸ã®ç§»è¡Œ",
    "current_phase": "ç‰¹å®šã‚¹ã‚¿ã‚¤ãƒ«ã¸ã®æ·±åŒ–",
    "sophistication_indicators": [
      "ã‚°ãƒ©ã‚¹ã‚¦ã‚§ã‚¢ã®é©åˆ‡ãªä½¿ç”¨",
      "å°‚é–€çš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã®å¢—åŠ ",
      "é™å®šå“ã®å‰²åˆä¸Šæ˜‡"
    ]
  },
  "unique_insights": [
    "IPAç³»ã‚’ä¸­å¿ƒã«ã€å­£ç¯€ã§æ¿ƒæ·¡ã‚’ä½¿ã„åˆ†ã‘ã‚‹",
    "åœ°å…ƒãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã¸ã®å¼·ã„ãƒ­ã‚¤ãƒ¤ãƒªãƒ†ã‚£",
    "æ–™ç†ã¨ã®ãƒšã‚¢ãƒªãƒ³ã‚°ã‚’é‡è¦–ã™ã‚‹å‚¾å‘",
    "ç‰¹åˆ¥ãªæ—¥ã«ã¯é«˜ABVã®ãƒãƒ¬ãƒ«ã‚¨ã‚¤ã‚¸ãƒ‰ã‚’é¸ã¶"
  ],
  "recommendations": {
    "unexplored_styles": ["ã¾ã è©¦ã—ã¦ã„ãªã„ãŒå¥½ã¿ã«åˆã„ãã†ãªã‚¹ã‚¿ã‚¤ãƒ«"],
    "next_breweries": ["è¨ªå•ã™ã¹ããƒ–ãƒ«ãƒ¯ãƒªãƒ¼"],
    "seasonal_suggestions": ["ä»Šã®å­£ç¯€ã«ãŠã™ã™ã‚"]
  }
}

æ³¨æ„ï¼šãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã«é…æ…®ã—ã€äººç‰©ã®é¡”ã‚„å€‹äººæƒ…å ±ã¯åˆ†æžå¯¾è±¡å¤–ã¨ã—ã¦ãã ã•ã„ã€‚
`;
    }
}
```

## 3. å®Ÿéš›ã®ä½¿ç”¨ãƒ•ãƒ­ãƒ¼

### 3.1 ä»Šé£²ã‚€ãƒ“ãƒ¼ãƒ«ã‚’é¸ã¶

```typescript
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®çŠ¶æ³å…¥åŠ›
const currentSituation = {
    mood: "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ãŸã„",
    occasion: "è‡ªå®…ã§å¤•é£Ÿå¾Œ",
    budget: 500,
    availability: "è¿‘æ‰€ã®ã‚³ãƒ³ãƒ“ãƒ‹"
};

// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
const prompt = generator.generateBeerSelectionPrompt(userContext);

// â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒChatGPT/Claudeã«ã‚³ãƒ”ãƒš
// â†’ AIã‹ã‚‰ã®æŽ¨è–¦ã‚’å—ã‘å–ã‚‹
// â†’ çµæžœã‚’ã‚¢ãƒ—ãƒªã«ä¿å­˜ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

### 3.2 ãƒ“ã‚¢ãƒãƒ¼è¨ªå•è¨ˆç”»

```typescript
// è¨ªå•äºˆå®šå…¥åŠ›
const visitPlan = {
    location: "æ¸‹è°·",
    date: "ä»Šé€±æœ«",
    purpose: "æ–°ã—ã„IPAã‚’è©¦ã—ãŸã„"
};

// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
const prompt = generator.generateBeerBarPrompt(userContext, visitPlan.location);

// â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿè¡Œ
// â†’ ãŠã™ã™ã‚ãƒãƒ¼ãƒªã‚¹ãƒˆã‚’å–å¾—
// â†’ è¨ªå•å¾Œã«ä½“é¨“ã‚’è¨˜éŒ²
```

## 4. ã‚·ãƒ³ãƒ—ãƒ«ãªUIè¨­è¨ˆ

```typescript
// ãƒ¡ã‚¤ãƒ³ç”»é¢
interface MainScreen {
    quickActions: [
        { icon: "ðŸº", label: "ä»Šé£²ã‚€ãƒ“ãƒ¼ãƒ«ã‚’é¸ã¶", action: "selectBeer" },
        { icon: "ðŸ“", label: "ãƒ“ã‚¢ãƒãƒ¼ã‚’æŽ¢ã™", action: "findBar" },
        { icon: "ðŸ“", label: "é£²ã‚“ã ãƒ“ãƒ¼ãƒ«ã‚’è¨˜éŒ²", action: "logBeer" },
        { icon: "ðŸ“š", label: "ãƒ“ãƒ¼ãƒ«ã«ã¤ã„ã¦å­¦ã¶", action: "learnBeer" }
    ];
    
    recentPrompts: PromptHistory[];
    beerStats: {
        totalTried: number;
        favoriteStyle: string;
        thisMonthCount: number;
    };
}

// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºç”»é¢
interface PromptDisplay {
    title: string;
    prompt: string;  // ã‚³ãƒ”ãƒ¼å¯èƒ½ãªãƒ†ã‚­ã‚¹ãƒˆ
    copyButton: boolean;
    instructions: string[];
    importBackButton: boolean;
}
```

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ“ãƒ¼ãƒ«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
CREATE TABLE beer_contexts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID UNIQUE NOT NULL,
    preferences JSONB NOT NULL DEFAULT '{}',
    history JSONB NOT NULL DEFAULT '[]',
    current_state JSONB NOT NULL DEFAULT '{}',
    goals JSONB NOT NULL DEFAULT '{}',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ãƒ“ãƒ¼ãƒ«è¨˜éŒ²
CREATE TABLE beer_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES beer_contexts(user_id),
    beer_name VARCHAR(200) NOT NULL,
    brewery VARCHAR(200),
    style VARCHAR(100),
    rating INTEGER CHECK (rating >= 1 AND rating <= 10),
    notes TEXT,
    location VARCHAR(200),
    price INTEGER,
    logged_at TIMESTAMP DEFAULT NOW()
);

-- ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå±¥æ­´
CREATE TABLE prompt_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES beer_contexts(user_id),
    prompt_type VARCHAR(50),
    prompt_content TEXT,
    used_count INTEGER DEFAULT 0,
    last_used TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW()
);
```

## 6. MVPå®Ÿè£…ï¼ˆè¶…ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰

```typescript
// Cloudflare Workerï¼ˆAPIï¼‰
export default {
    async fetch(request, env) {
        const url = new URL(request.url);
        
        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
        if (url.pathname === '/api/generate-prompt') {
            const { userId, promptType, params } = await request.json();
            
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå–å¾—
            const context = await getUserContext(env.DB, userId);
            
            // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
            const prompt = generatePrompt(promptType, context, params);
            
            return Response.json({ prompt });
        }
        
        // ãƒ“ãƒ¼ãƒ«è¨˜éŒ²ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
        if (url.pathname === '/api/log-beer') {
            const { userId, beerLog } = await request.json();
            
            await saveBeerLog(env.DB, userId, beerLog);
            await updateUserContext(env.DB, userId, beerLog);
            
            return Response.json({ success: true });
        }
    }
};
```

ã“ã‚Œã§ã€**ãƒ“ãƒ¼ãƒ«ã«ç‰¹åŒ–ã—ãŸ**ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆãŒã§ãã¾ã—ãŸï¼